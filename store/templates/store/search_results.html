{% extends 'base.html' %}
{% load custom_tags %}
{% load static %}
{% block content %}

<div class="product">
  <div class="container mt-4">
  <h1 class="text-center mb-4">Результаты поиска</h1>

  <div class="row">
    <!-- Фильтры (слева) -->
    <aside class="col-md-3 mb-4">
  {% if category == 'cpu' %}
    {% include 'store/search_filters/cpu_search_filter.html' %}
  {% elif category == 'gpu' %}
    {% include 'store/search_filters/gpu_search_filter.html' %}
  {% elif category == 'motherboard' %}
    {% include 'store/search_filters/motherboard_search_filter.html' %}
  {% elif category == 'ram' %}
    {% include 'store/search_filters/ram_search_filter.html' %}
  {% elif category == 'case' %}
    {% include 'store/search_filters/case_search_filter.html' %}
  {% elif category == 'psu' %}
    {% include 'store/search_filters/psu_search_filter.html' %}
  {% elif category == 'cooler' %}
    {% include 'store/search_filters/cooler_search_filter.html' %}
  {% elif category == 'memory' %}
    {% include 'store/search_filters/memory_search_filter.html' %}
      {% elif query %}
    <p>Категория не определена. Уточните запрос.</p>
  {% endif %}
    </aside>

    <!-- Карточки товаров -->
    <div class="col-md-9">
      <div class="row g-3">
        {% for product in results %}
          {% if category == 'cpu' %}
            <!-- CPU карточка -->
            <div class="col-12 mb-4">
              <div class="bg-white rounded shadow position-relative card-hover d-flex align-items-center p-4" style="min-height: 200px;">
                <img src="{% static product.image %}" alt="{{ product.name }}" class="img-fluid me-4" style="width: 220px; height: auto; border-radius: 8px;"/>
                <div class="flex-grow-1 d-flex flex-column justify-content-between h-100">
                  <div>
                     <a href="{{ product.get_absolute_url }}" style="text-decoration:none; color: black;background-color: transparent; transition: color 0.3s, background-color 0.3s;">
                    <h3 class="h5 mb-2">{{ product.brand }} {{ product.product_name }}</h3>
                    <p class="text-muted mb-3" style="max-width: 600px;">
                      {{ product.socket }}, {{ product.cpu_clock }} МГц, {{ product.cores }} ядер, {{ product.potok }} потоков, TDP {{ product.tdp }} Вт
                    </p>
                     </a>
                    <div class="mb-3">
                      <span class="badge bg-primary me-2">Turbo Boost</span>
                      <span class="badge bg-success me-2">Hyper-Threading</span>
                      <span class="badge bg-secondary me-2">Unlocked</span>
                    </div>
                  </div>
                  <div class="d-flex justify-content-between align-items-center">
                    <div class="text-warning" style="font-size: 1.1rem;">
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star-half-alt"></i>
                      <span class="text-muted small ms-2">4.7</span>
                    </div>
                    <div class="price-tag fs-5 fw-bold">{{ product.price }} ₽</div>
                    <button class="btn btn-primary btn-sm px-4">
                      <i class="fas fa-shopping-cart me-1"></i> Купить
                    </button>
                  </div>
                </div>
              </div>
            </div>


          {% elif category == 'gpu' %}
            <!-- GPU карточка -->
            <div class="col-12 mb-4">
              <div class="bg-white rounded shadow position-relative card-hover d-flex align-items-center p-4" style="min-height: 200px;">
                <img src="{% static product.image %}" alt="{{ product.name }}" class="img-fluid me-4" style="width: 220px; height: auto; border-radius: 8px;"/>
                <div class="flex-grow-1 d-flex flex-column justify-content-between h-100">
                  <div>
                    <a href="{{ product.get_absolute_url }}" style="text-decoration:none; color: black;background-color: transparent; transition: color 0.3s, background-color 0.3s;">
                    <h3 class="h5 mb-2">{{ product.brand }} {{ product.product_name }}</h3>
                    <p class="text-muted mb-3" style="max-width: 600px;">
                      {{ product.pci }}, {{ product.vram_type }}, {{ product.vram }}, {{ product.memory_interface }}, {{ product.output_type }}, {{ product.gpu_clock }} МГц
                    </p>
                    </a>
                    <div class="mb-3">
                      <span class="badge bg-info me-2">PCIe 4.0</span>
                      <span class="badge bg-danger me-2">DLSS</span>
                    </div>
                  </div>
                  <div class="d-flex justify-content-between align-items-center">
                    <div class="text-warning" style="font-size: 1.1rem;">
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star-half-alt"></i>
                      <span class="text-muted small ms-2">4.6</span>
                    </div>
                    <div class="price-tag fs-5 fw-bold">{{ product.price }} ₽</div>
                    <button class="btn btn-primary btn-sm px-4">
                      <i class="fas fa-shopping-cart me-1"></i> Купить
                    </button>
                  </div>
                </div>
              </div>
            </div>
          {% elif category == 'motherboard' %}
            <!-- Материнская плата -->
            <div class="col-12 mb-4">
              <div class="bg-white rounded shadow position-relative card-hover d-flex align-items-center p-4" style="min-height: 200px;">
                <img src="{% static product.image %}" alt="{{ product.name }}" class="img-fluid me-4" style="width: 220px; height: auto; border-radius: 8px;"/>
                <div class="flex-grow-1 d-flex flex-column justify-content-between h-100">
                  <div>
                     <a href="{{ product.get_absolute_url }}" style="text-decoration:none; color: black;background-color: transparent; transition: color 0.3s, background-color 0.3s;">
                    <h3 class="h5 mb-2">{{ product.brand }} {{ product.product_name }}</h3>
                    <p class="text-muted mb-3" style="max-width: 600px;">
                      {{ product.socket }}, {{ product.chipset }}, {{ product.ram_slots }} слотов, {{ product.form_factor }}
                    </p>
                     </a>
                    <div class="mb-3">
                      <span class="badge bg-dark me-2">M.2</span>
                      <span class="badge bg-secondary me-2">RGB</span>
                    </div>
                  </div>
                  <div class="d-flex justify-content-between align-items-center">
                    <div class="text-warning" style="font-size: 1.1rem;">
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star-half-alt"></i>
                      <span class="text-muted small ms-2">4.5</span>
                    </div>
                    <div class="price-tag fs-5 fw-bold">{{ product.price }} ₽</div>
                    <button class="btn btn-primary btn-sm px-4">
                      <i class="fas fa-shopping-cart me-1"></i> Купить
                    </button>
                  </div>
                </div>
              </div>
            </div>
        {% elif category == 'ram' %}
                    <div class="col-12 mb-4">
              <div class="bg-white rounded shadow position-relative card-hover d-flex align-items-center p-4" style="min-height: 200px;">
                <img src="{% static product.image %}" alt="{{ product.name }}" class="img-fluid me-4" style="width: 220px; height: auto; border-radius: 8px;"/>
                <div class="flex-grow-1 d-flex flex-column justify-content-between h-100">
                  <div>
                     <a href="{{ product.get_absolute_url }}" style="text-decoration:none; color: black;background-color: transparent; transition: color 0.3s, background-color 0.3s;">
                    <h3 class="h5 mb-2">{{ product.brand }} {{ product.product_name }}</h3>
                    <p class="text-muted mb-3" style="max-width: 600px;">
                      {{product.memory_type}}, {{product.one_module_memory}} Гбx{{product.moduls_in}} шт, {{product.hertz}} МГц, {{product.timings}}
                    </p>
                     </a>
                    <div class="mb-3">
                      <span class="badge bg-dark me-2">M.2</span>
                      <span class="badge bg-secondary me-2">RGB</span>
                    </div>
                  </div>
                  <div class="d-flex justify-content-between align-items-center">
                    <div class="text-warning" style="font-size: 1.1rem;">
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star-half-alt"></i>
                      <span class="text-muted small ms-2">4.5</span>
                    </div>
                    <div class="price-tag fs-5 fw-bold">{{ product.price }} ₽</div>
                    <button class="btn btn-primary btn-sm px-4">
                      <i class="fas fa-shopping-cart me-1"></i> Купить
                    </button>
                  </div>
                </div>
              </div>
            </div>

        {% elif category == 'case' %}
                    <div class="col-12 mb-4">
              <div class="bg-white rounded shadow position-relative card-hover d-flex align-items-center p-4" style="min-height: 200px;">
                <img src="{% static product.image %}" alt="{{ product.name }}" class="img-fluid me-4" style="width: 220px; height: auto; border-radius: 8px;"/>
                <div class="flex-grow-1 d-flex flex-column justify-content-between h-100">
                  <div>
                     <a href="{{ product.get_absolute_url }}" style="text-decoration:none; color: black;background-color: transparent; transition: color 0.3s, background-color 0.3s;">
                    <h3 class="h5 mb-2">{{ product.brand }} {{ product.product_name }}</h3>
                    <p class="text-muted mb-3" style="max-width: 600px;">
                      {{product.type_size}}, {{product.form_factor}} , {{product.body_material}}, {{product.size}}
                    </p>
                     </a>
                    <div class="mb-3">
                      <span class="badge bg-dark me-2">M.2</span>
                      <span class="badge bg-secondary me-2">RGB</span>
                    </div>
                  </div>
                  <div class="d-flex justify-content-between align-items-center">
                    <div class="text-warning" style="font-size: 1.1rem;">
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star-half-alt"></i>
                      <span class="text-muted small ms-2">4.5</span>
                    </div>
                    <div class="price-tag fs-5 fw-bold">{{ product.price }} ₽</div>
                    <button class="btn btn-primary btn-sm px-4">
                      <i class="fas fa-shopping-cart me-1"></i> Купить
                    </button>
                  </div>
                </div>
              </div>
            </div>

        {% elif category == 'psu' %}
                    <div class="col-12 mb-4">
              <div class="bg-white rounded shadow position-relative card-hover d-flex align-items-center p-4" style="min-height: 200px;">
                <img src="{% static product.image %}" alt="{{ product.name }}" class="img-fluid me-4" style="width: 220px; height: auto; border-radius: 8px;"/>
                <div class="flex-grow-1 d-flex flex-column justify-content-between h-100">
                  <div>
                     <a href="{{ product.get_absolute_url }}" style="text-decoration:none; color: black;background-color: transparent; transition: color 0.3s, background-color 0.3s;">
                    <h3 class="h5 mb-2">{{ product.brand }} {{ product.product_name }}</h3>
                    <p class="text-muted mb-3" style="max-width: 600px;">
                     {{product.wattage}} Вт, {{product.formfactor}}, {{product.certificate}}, {{product.pins}}
                    </p>
                     </a>
                    <div class="mb-3">
                      <span class="badge bg-dark me-2">M.2</span>
                      <span class="badge bg-secondary me-2">RGB</span>
                    </div>
                  </div>
                  <div class="d-flex justify-content-between align-items-center">
                    <div class="text-warning" style="font-size: 1.1rem;">
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star-half-alt"></i>
                      <span class="text-muted small ms-2">4.5</span>
                    </div>
                    <div class="price-tag fs-5 fw-bold">{{ product.price }} ₽</div>
                    <button class="btn btn-primary btn-sm px-4">
                      <i class="fas fa-shopping-cart me-1"></i> Купить
                    </button>
                  </div>
                </div>
              </div>
            </div>

        {% elif category == 'cooler' %}
                    <div class="col-12 mb-4">
              <div class="bg-white rounded shadow position-relative card-hover d-flex align-items-center p-4" style="min-height: 200px;">
                <img src="{% static product.image %}" alt="{{ product.name }}" class="img-fluid me-4" style="width: 220px; height: auto; border-radius: 8px;"/>
                <div class="flex-grow-1 d-flex flex-column justify-content-between h-100">
                  <div>
                     <a href="{{ product.get_absolute_url }}" style="text-decoration:none; color: black;background-color: transparent; transition: color 0.3s, background-color 0.3s;">
                    <h3 class="h5 mb-2">{{ product.brand }} {{ product.product_name }}</h3>
                    <p class="text-muted mb-3" style="max-width: 600px;">
                      {{product.socket}}, {{product.tdp}} Вт, {{product.connector_type}} коннектор, {{product.cooler_size}}
                    </p>
                     </a>
                    <div class="mb-3">
                      <span class="badge bg-dark me-2">M.2</span>
                      <span class="badge bg-secondary me-2">RGB</span>
                    </div>
                  </div>
                  <div class="d-flex justify-content-between align-items-center">
                    <div class="text-warning" style="font-size: 1.1rem;">
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star-half-alt"></i>
                      <span class="text-muted small ms-2">4.5</span>
                    </div>
                    <div class="price-tag fs-5 fw-bold">{{ product.price }} ₽</div>
                    <button class="btn btn-primary btn-sm px-4">
                      <i class="fas fa-shopping-cart me-1"></i> Купить
                    </button>
                  </div>
                </div>
              </div>
            </div>

        {% elif category == 'memory' %}
                    <div class="col-12 mb-4">
              <div class="bg-white rounded shadow position-relative card-hover d-flex align-items-center p-4" style="min-height: 200px;">
                <img src="{% static product.image %}" alt="{{ product.name }}" class="img-fluid me-4" style="width: 220px; height: auto; border-radius: 8px;"/>
                <div class="flex-grow-1 d-flex flex-column justify-content-between h-100">
                  <div>
                     <a href="{{ product.get_absolute_url }}" style="text-decoration:none; color: black;background-color: transparent; transition: color 0.3s, background-color 0.3s;">
                    <h3 class="h5 mb-2">{{ product.brand }} {{ product.product_name }}</h3>
                    <p class="text-muted mb-3" style="max-width: 600px;">
                      {{product.digital_storage}} Гб, {{product.interface_pci}}
                    </p>
                     </a>
                    <div class="mb-3">
                      <span class="badge bg-dark me-2">M.2</span>
                      <span class="badge bg-secondary me-2">RGB</span>
                    </div>
                  </div>
                  <div class="d-flex justify-content-between align-items-center">
                    <div class="text-warning" style="font-size: 1.1rem;">
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star-half-alt"></i>
                      <span class="text-muted small ms-2">4.5</span>
                    </div>
                    <div class="price-tag fs-5 fw-bold">{{ product.price }} ₽</div>
                    <button class="btn btn-primary btn-sm px-4">
                      <i class="fas fa-shopping-cart me-1"></i> Купить
                    </button>
                  </div>
                </div>
              </div>
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
  </div>
</div>
</div>
{% endblock %}


